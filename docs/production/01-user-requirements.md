# 用户需求分析

## 用户画像

**小林，28岁，软件工程师，正在自学尤克里里**

- 零乐理基础，不识五线谱，但能看懂简谱的基本数字
- 从网上（小红书、贴吧、PDF）找到喜欢的歌曲简谱，想跟着练习
- 练习时最大的痛点：**不知道节奏该怎么弹，看着谱子脑子里没有"声音"**
- 希望有个工具能"带着我走"，像卡拉OK的歌词滚动一样

---

## 用户故事（User Stories）

### 核心故事

> **作为**一个正在学尤克里里的初学者，
> **我想要**把网上找到的简谱上传到一个网页上，让它能一边播放旋律一边高亮当前该弹的音符，
> **这样**我就能跟着节奏练习，不用反复停下来猜节拍了。

### 拆解需求

| 优先级 | 用户故事 | 验收标准 |
|--------|---------|---------|
| P0 | 我想把简谱文本粘贴进去就能看到排版好的简谱 | 支持纯文本简谱输入，自动渲染为可视化简谱 |
| P0 | 我想按下播放键就能听到旋律 | 点击播放按钮，按曲谱顺序发出对应音高的声音 |
| P0 | 播放时我想看到当前弹到哪个音了 | 当前播放的音符有明显的高亮/指示效果 |
| P1 | 我想调节播放速度，太快了跟不上 | 提供 BPM/速度调节，支持慢速练习 |
| P1 | 我想修改谱子里的错误音符 | 支持点击音符进行编辑 |
| P2 | 我想设定循环某几个小节反复练 | 支持选择小节范围进行循环播放 |
| P2 | 我想调整整首曲子的调号 | 支持变调（移调）功能 |

---

## 用户痛点深挖

### 1. "谱子看得懂，但节奏感建立不起来"
- 简谱上的时值标记（下划线、附点）初学者经常搞错
- **需要：播放功能帮助建立节奏感知**

### 2. "网上找的谱子格式乱七八糟"
- 有的是图片，有的是纯文本，格式不统一
- **需要：简单的文本输入格式，降低使用门槛**

### 3. "练到某一段总是卡壳，想反复练"
- 从头播放太浪费时间
- **需要：能从任意位置开始播放，能循环某段**

### 4. "不想装软件，打开就能用"
- 手机上找谱、电脑上练琴是常见场景
- **需要：网页应用，无需安装**

---

## 简谱文本格式需求

用户需要一种**极其简单直觉**的文本格式来输入简谱。参考行业惯例，初步定义：

```
标题: 小星星
调号: C
拍号: 4/4
速度: 120

1 1 5 5 | 6 6 5 - | 4 4 3 3 | 2 2 1 - |
5 5 4 4 | 3 3 2 - | 5 5 4 4 | 3 3 2 - |
1 1 5 5 | 6 6 5 - | 4 4 3 3 | 2 2 1 - |
```

### 格式约定
- 数字 `1-7` 表示音符 do-si
- `0` 表示休止符
- `-` 表示延长（延续前一个音）
- `|` 表示小节线
- 高八度：`1.`（数字后加点）或后续设计中用上标
- 低八度：`.1`（数字前加点）或后续设计中用下标
- 半拍：用空格自然分隔，在拍号约束下自动推算
- `#` 或 `b` 表示升降号

---

## 非功能性需求

1. **零学习成本**：打开网页，粘贴谱子，点播放，三步完成
2. **响应速度**：渲染和播放启动应在 1 秒内
3. **移动友好**：手机竖屏也能舒适查看简谱
4. **离线可用**：一旦加载完毕，断网也能使用（PWA 可选）
